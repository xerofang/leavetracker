<%- include('../layouts/main', { body: `
<div class="d-flex justify-content-between align-items-center mb-4">
  <h2><i class="bi bi-file-earmark-bar-graph"></i> Reports</h2>
</div>

<div class="row">
  <div class="col-lg-4 mb-4">
    <div class="card shadow-sm h-100">
      <div class="card-header bg-primary text-white">
        <h6 class="mb-0"><i class="bi bi-pie-chart"></i> Leave Summary Report</h6>
      </div>
      <div class="card-body">
        <p class="text-muted small">Summary of all approved leaves grouped by employee for a specific year.</p>
        <form method="POST" action="/admin/reports/generate">
          <input type="hidden" name="report_type" value="summary">
          <div class="mb-3">
            <label class="form-label">Year</label>
            <select class="form-select" name="year" required>
              <option value="${currentYear}">${currentYear}</option>
              <option value="${currentYear - 1}">${currentYear - 1}</option>
            </select>
          </div>
          <div class="mb-3">
            <label class="form-label">Department (Optional)</label>
            <select class="form-select" name="department">
              <option value="">All Departments</option>
              ${departments.map(d => `<option value="${d}">${d}</option>`).join('')}
            </select>
          </div>
          <button type="submit" class="btn btn-primary w-100">
            <i class="bi bi-download"></i> Download CSV
          </button>
        </form>
      </div>
    </div>
  </div>

  <div class="col-lg-4 mb-4">
    <div class="card shadow-sm h-100">
      <div class="card-header bg-success text-white">
        <h6 class="mb-0"><i class="bi bi-list-ul"></i> Detailed Leave Report</h6>
      </div>
      <div class="card-body">
        <p class="text-muted small">Detailed list of all approved leave requests with dates and approvers.</p>
        <form method="POST" action="/admin/reports/generate">
          <input type="hidden" name="report_type" value="detailed">
          <div class="mb-3">
            <label class="form-label">Date Range</label>
            <div class="row g-2">
              <div class="col-6">
                <input type="date" class="form-control form-control-sm" name="start_date" required>
              </div>
              <div class="col-6">
                <input type="date" class="form-control form-control-sm" name="end_date" required>
              </div>
            </div>
          </div>
          <div class="mb-3">
            <label class="form-label">Employee (Optional)</label>
            <select class="form-select" name="employee_id">
              <option value="">All Employees</option>
              ${employees.map(e => `<option value="${e.id}">${e.first_name} ${e.last_name}</option>`).join('')}
            </select>
          </div>
          <div class="mb-3">
            <label class="form-label">Department (Optional)</label>
            <select class="form-select" name="department">
              <option value="">All Departments</option>
              ${departments.map(d => `<option value="${d}">${d}</option>`).join('')}
            </select>
          </div>
          <button type="submit" class="btn btn-success w-100">
            <i class="bi bi-download"></i> Download CSV
          </button>
        </form>
      </div>
    </div>
  </div>

  <div class="col-lg-4 mb-4">
    <div class="card shadow-sm h-100">
      <div class="card-header bg-info text-white">
        <h6 class="mb-0"><i class="bi bi-wallet2"></i> Balance Report</h6>
      </div>
      <div class="card-body">
        <p class="text-muted small">Current leave balances for all employees including entitled, used, and available days.</p>
        <form method="POST" action="/admin/reports/generate">
          <input type="hidden" name="report_type" value="balance">
          <div class="mb-3">
            <label class="form-label">Year</label>
            <select class="form-select" name="year" required>
              <option value="${currentYear}">${currentYear}</option>
              <option value="${currentYear - 1}">${currentYear - 1}</option>
            </select>
          </div>
          <button type="submit" class="btn btn-info w-100 text-white">
            <i class="bi bi-download"></i> Download CSV
          </button>
        </form>
      </div>
    </div>
  </div>
</div>
` }) %>
